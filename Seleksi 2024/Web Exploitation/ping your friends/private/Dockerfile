FROM alpine:latest

WORKDIR /home/sillyfriend

COPY . .

RUN apk update 
RUN apk add --no-cache python3 py-pip bash
RUN python3 -m venv /home/sillyfriend/venv 
RUN /home/sillyfriend/venv/bin/pip install --no-cache flask
RUN adduser sillyfriend -D -h /home/sillyfriend \
&& chown root:root -R /home/ \
&& chmod 755 -R /home/sillyfriend

USER sillyfriend

CMD ["/home/sillyfriend/venv/bin/python3", "app.py"]
